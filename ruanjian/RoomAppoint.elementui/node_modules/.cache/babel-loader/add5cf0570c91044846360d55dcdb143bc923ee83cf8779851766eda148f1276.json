{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport store from '@/store';\nimport { mapGetters } from 'vuex';\nexport default {\n  computed: {\n    ...mapGetters(['Token', 'UserInfo', 'RoleType', 'HasUserInfo', 'ColumnType', \"UserId\"])\n  },\n  data() {\n    return {\n      editModalFormRules: {\n        \"No\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"Name\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"RoomId\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"SeatId\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"UserId\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"AppointStatus\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"BeginTime\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"EndTime\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"Phone\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }, {\n          validator: (rule, value, callback) => {\n            var reg = /^1[34578]\\d{9}$/;\n            if (!value || !reg.test(value)) {\n              callback(new Error('请输入正确的手机号'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        }],\n        \"Comment\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }],\n        \"CommentScore\": [{\n          required: true,\n          message: '该项为必填项',\n          trigger: 'blur'\n        }]\n      },\n      formData: {},\n      //保存或者修改定义的数据对象\n      editorShow: true\n    };\n  },\n  created() {\n    let tick = this.$route.query.tick;\n    let jsonData = localStorage.getItem(tick);\n    let data = JSON.parse(jsonData);\n    this.formData = {\n      RoomId: data.RoomId,\n      SeatId: data.SeatId,\n      UserId: data.UserId,\n      AppointDateType: data.AppointDateType,\n      AppointDate: data.AppointDate,\n      AppointStatus: 1\n    };\n  },\n  methods: {\n    //订单确认\n    async ToOrder() {\n      this.$refs.editModalForm.validate(async valid => {\n        if (valid) {\n          let {\n            Success\n          } = await this.$Post(\"/AppointRecord/ToOrder\", this.formData);\n          if (Success) {\n            //跳转到下一个页面\n            this.$router.push({\n              path: \"/Front/AppointRecordList\"\n            });\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    //返回上一个页面\n    goBack() {\n      this.$router.go(-1);\n    }\n  }\n};","map":{"version":3,"names":["store","mapGetters","computed","data","editModalFormRules","required","message","trigger","validator","rule","value","callback","reg","test","Error","formData","editorShow","created","tick","$route","query","jsonData","localStorage","getItem","JSON","parse","RoomId","SeatId","UserId","AppointDateType","AppointDate","AppointStatus","methods","ToOrder","$refs","editModalForm","validate","valid","Success","$Post","$router","push","path","goBack","go"],"sources":["src/views/Front/ToOrder.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-page-header class=\"card margin-top-lg\" @back=\"goBack\" content=\"确定选座\">\r\n        </el-page-header>\r\n\r\n        <div class=\"margin-top-lg card\">\r\n            <el-form v-if=\"editorShow == true\" ref=\"editModalForm\" :rules=\"editModalFormRules\" :model=\"formData\"\r\n                label-width=\"140px\" size=\"mini\">\r\n                <el-row :gutter=\"10\" class=\"EditFromBody\">\r\n\r\n\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"自习室\" prop=\"RoomId\">\r\n                            <SigleSelect url=\"/Room/List\" :disabled=\"true\" columnName=\"Name\" columnValue=\"Id\"\r\n                                v-model=\"formData.RoomId\">\r\n                            </SigleSelect>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"座位\" prop=\"SeatId\">\r\n                            <SigleSelect url=\"/Seat/List\" :disabled=\"true\" columnName=\"No\" columnValue=\"Id\"\r\n                                v-model=\"formData.SeatId\">\r\n                            </SigleSelect>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"预约账号\" prop=\"UserId\">\r\n                            <SigleSelect url=\"/User/List\" :disabled=\"true\" columnName=\"UserName\" columnValue=\"Id\"\r\n                                v-model=\"formData.UserId\">\r\n                            </SigleSelect>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"预约时间\" prop=\"AppointDateType\">\r\n                            <SigleSelect url=\"/Select/AppointDateTypeEnum\" :disabled=\"true\" columnName=\"Name\"\r\n                                columnValue=\"Code\" v-model=\"formData.AppointDateType\">\r\n                            </SigleSelect>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"姓名\" prop=\"Name\">\r\n                            <el-input type=\"text\" v-model.trim=\"formData.Name\" placeholder=\"请输入姓名\"\r\n                                :clearable=\"true\"></el-input>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"手机号\" prop=\"Phone\">\r\n                            <el-input type=\"text\" v-model.trim=\"formData.Phone\" placeholder=\"请输入手机号\"\r\n                                :clearable=\"true\"></el-input>\r\n                        </el-form-item>\r\n                    </el-col>\r\n\r\n                </el-row>\r\n\r\n\r\n                <el-row type=\"flex\" justify=\"end\" align=\"bottom\">\r\n                    <el-form-item>\r\n                        <el-button type=\"primary\" size=\"large\" @click=\"ToOrder()\">确 定</el-button>\r\n                    </el-form-item>\r\n                </el-row>\r\n            </el-form>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport store from '@/store';\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n    computed: {\r\n        ...mapGetters([\r\n            'Token', 'UserInfo', 'RoleType', 'HasUserInfo', 'ColumnType', \"UserId\"\r\n        ])\r\n    },\r\n    data() {\r\n        return {\r\n            editModalFormRules: {\r\n                \"No\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                ],\r\n                \"Name\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                ],\r\n                \"RoomId\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                ],\r\n                \"SeatId\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                ],\r\n                \"UserId\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                ],\r\n                \"AppointStatus\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                ],\r\n                \"BeginTime\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                ],\r\n                \"EndTime\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                ],\r\n                \"Phone\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                    {\r\n                        validator: (rule, value, callback) => {\r\n                            var reg = /^1[34578]\\d{9}$/;\r\n                            if (!value || !reg.test(value)) {\r\n                                callback(new Error('请输入正确的手机号'));\r\n                            }\r\n                            else {\r\n                                callback();\r\n                            }\r\n                        }, trigger: 'blur'\r\n                    },\r\n                ],\r\n                \"Comment\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                ],\r\n                \"CommentScore\": [\r\n                    { required: true, message: '该项为必填项', trigger: 'blur' },\r\n                ],\r\n            },\r\n            formData: {\r\n\r\n            },//保存或者修改定义的数据对象\r\n            editorShow: true,\r\n        }\r\n    },\r\n    created() {\r\n        let tick = this.$route.query.tick;\r\n        let jsonData = localStorage.getItem(tick);\r\n        let data = JSON.parse(jsonData);\r\n        this.formData = {\r\n            RoomId: data.RoomId,\r\n            SeatId: data.SeatId,\r\n            UserId: data.UserId,\r\n            AppointDateType: data.AppointDateType,\r\n            AppointDate: data.AppointDate,\r\n            AppointStatus: 1,\r\n        };\r\n\r\n    },\r\n    methods: {\r\n        //订单确认\r\n        async ToOrder() {\r\n            this.$refs.editModalForm.validate(async (valid) => {\r\n                if (valid) {\r\n                    let { Success } = await this.$Post(\"/AppointRecord/ToOrder\", this.formData);\r\n                    if (Success) {\r\n                        //跳转到下一个页面\r\n                        this.$router.push({\r\n                            path: \"/Front/AppointRecordList\"\r\n                        })\r\n                    }\r\n                } else {\r\n\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        //返回上一个页面\r\n        goBack() {\r\n            this.$router.go(-1)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style></style>"],"mappings":";AAmEA,OAAAA,KAAA;AACA,SAAAC,UAAA;AACA;EACAC,QAAA;IACA,GAAAD,UAAA,EACA,uEACA;EACA;EACAE,KAAA;IACA;MACAC,kBAAA;QACA,OACA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACA,SACA;UAAAF,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACA,WACA;UAAAF,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACA,WACA;UAAAF,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACA,WACA;UAAAF,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACA,kBACA;UAAAF,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACA,cACA;UAAAF,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACA,YACA;UAAAF,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACA,UACA;UAAAF,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UACAC,SAAA,EAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;YACA,IAAAC,GAAA;YACA,KAAAF,KAAA,KAAAE,GAAA,CAAAC,IAAA,CAAAH,KAAA;cACAC,QAAA,KAAAG,KAAA;YACA,OACA;cACAH,QAAA;YACA;UACA;UAAAJ,OAAA;QACA,EACA;QACA,YACA;UAAAF,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACA,iBACA;UAAAF,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAQ,QAAA,GAEA;MAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACA,IAAAC,IAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAF,IAAA;IACA,IAAAG,QAAA,GAAAC,YAAA,CAAAC,OAAA,CAAAL,IAAA;IACA,IAAAf,IAAA,GAAAqB,IAAA,CAAAC,KAAA,CAAAJ,QAAA;IACA,KAAAN,QAAA;MACAW,MAAA,EAAAvB,IAAA,CAAAuB,MAAA;MACAC,MAAA,EAAAxB,IAAA,CAAAwB,MAAA;MACAC,MAAA,EAAAzB,IAAA,CAAAyB,MAAA;MACAC,eAAA,EAAA1B,IAAA,CAAA0B,eAAA;MACAC,WAAA,EAAA3B,IAAA,CAAA2B,WAAA;MACAC,aAAA;IACA;EAEA;EACAC,OAAA;IACA;IACA,MAAAC,QAAA;MACA,KAAAC,KAAA,CAAAC,aAAA,CAAAC,QAAA,OAAAC,KAAA;QACA,IAAAA,KAAA;UACA;YAAAC;UAAA,eAAAC,KAAA,gCAAAxB,QAAA;UACA,IAAAuB,OAAA;YACA;YACA,KAAAE,OAAA,CAAAC,IAAA;cACAC,IAAA;YACA;UACA;QACA;UAEA;QACA;MACA;IACA;IACA;IACAC,OAAA;MACA,KAAAH,OAAA,CAAAI,EAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
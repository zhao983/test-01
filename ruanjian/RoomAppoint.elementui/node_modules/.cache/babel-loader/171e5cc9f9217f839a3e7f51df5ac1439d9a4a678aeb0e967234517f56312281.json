{"ast":null,"code":"import * as echarts from \"echarts\";\nexport default {\n  name: 'Home',\n  props: {},\n  data() {\n    return {\n      searchForm: {\n        DateRange: []\n      },\n      DataList: []\n    };\n  },\n  created() {},\n  mounted() {\n    this.GetAppointRoomAppointStatusData();\n  },\n  methods: {\n    //统计早中晚每个自习室的使用率&空闲率\n    async GetAppointRoomAppointStatusData() {\n      let {\n        Data\n      } = await this.$Post('/AppointRecord/GetAppointRoomAppointStatusData', this.searchForm);\n      this.DataList = Data;\n      this.$nextTick(() => {\n        for (let item of this.DataList) {\n          let myChart = echarts.init(document.getElementById(`echartDiv${item.Room.Id}`)); // 图标初始化\n\n          var option = option = {\n            title: {\n              left: 'center'\n            },\n            tooltip: {\n              trigger: 'item'\n            },\n            legend: {\n              orient: 'vertical',\n              left: 'left'\n            },\n            series: [{\n              name: '预约次数统计',\n              type: 'pie',\n              radius: '50%',\n              data: item.DataList.map(x => {\n                return {\n                  \"name\": x.Name,\n                  'value': x.Value\n                };\n              }),\n              emphasis: {\n                itemStyle: {\n                  shadowBlur: 10,\n                  shadowOffsetX: 0,\n                  shadowColor: 'rgba(0, 0, 0, 0.5)'\n                }\n              }\n            }]\n          };\n          myChart.setOption(option); // 渲染页面\n          //随着屏幕大小调节图表\n          window.addEventListener(\"resize\", () => {\n            myChart.resize();\n          });\n        }\n      });\n    },\n    /**\r\n    * 点击表格搜索按钮会触发\r\n    */\n    async SearchClick() {\n      if (this.searchForm.DateRange.length > 0) {\n        this.searchForm.BeginDate = this.searchForm.DateRange[0];\n        this.searchForm.EndDate = this.searchForm.DateRange[1];\n      }\n      this.GetAppointRoomAppointStatusData();\n    },\n    /**\r\n     * 点击清空表单会触发\r\n     */\n    async ResetClick() {\n      this.searchForm = {\n        DateRange: []\n      };\n      this.GetAppointRoomAppointStatusData();\n    }\n  }\n};","map":{"version":3,"names":["echarts","name","props","data","searchForm","DateRange","DataList","created","mounted","GetAppointRoomAppointStatusData","methods","Data","$Post","$nextTick","item","myChart","init","document","getElementById","Room","Id","option","title","left","tooltip","trigger","legend","orient","series","type","radius","map","x","Name","Value","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","setOption","window","addEventListener","resize","SearchClick","length","BeginDate","EndDate","ResetClick"],"sources":["src/views/Admin/AppointRoomAppointStatusData.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-card class=\"box-card\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n                <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-search\" @click=\"SearchClick\">搜 索</el-button>\r\n                <el-button type=\"warning\" size=\"mini\" @click=\"ResetClick\" icon=\"el-icon-s-promotion\">重 置</el-button>\r\n            </div>\r\n            <div class=\"tb-body\">\r\n                <el-form ref=\"searchFormRef\" :model=\"searchForm\" :inline=\"true\" label-width=\"120px\" :style=\"`flex:1;`\">\r\n                    <el-form-item label=\"时间范围\">\r\n                        <el-date-picker v-model=\"searchForm.DateRange\" type=\"datetimerange\" start-placeholder=\"起始时间\"\r\n                            end-placeholder=\"结束时间\" :default-time=\"['00:00:00']\" value-format=\"yyyy-MM-dd HH:mm:ss\">\r\n                        </el-date-picker>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n\r\n        </el-card>\r\n\r\n        <el-row :gutter=\"10\">\r\n            <el-col :span=\"6\" v-for=\"(item, index) in DataList\" :ley=\"index\">\r\n                <el-card class=\"box-card margin-top-lg\">\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span>{{ item.Room.Name }}</span>\r\n\r\n                    </div>\r\n                    <div class=\"echart\" :id=\"'echartDiv' + item.Room.Id\"\r\n                        :style=\"{ float: 'left', width: '100%', height: '500px' }\">\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n\r\n        </el-row>\r\n\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from \"echarts\";\r\nexport default {\r\n    name: 'Home',\r\n    props: {\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            searchForm: {\r\n                DateRange: []\r\n            },\r\n            DataList: [],\r\n\r\n        };\r\n    },\r\n    created() {\r\n\r\n    },\r\n    mounted() {\r\n        this.GetAppointRoomAppointStatusData();\r\n\r\n\r\n    },\r\n    methods: {\r\n        //统计早中晚每个自习室的使用率&空闲率\r\n        async GetAppointRoomAppointStatusData() {\r\n            let { Data } = await this.$Post('/AppointRecord/GetAppointRoomAppointStatusData', this.searchForm);\r\n            this.DataList = Data;\r\n\r\n            this.$nextTick(() => {\r\n                for (let item of this.DataList) {\r\n                    let myChart = echarts.init(document.getElementById(`echartDiv${item.Room.Id}`));// 图标初始化\r\n\r\n                    var option = option = {\r\n                        title: {\r\n\r\n                            left: 'center'\r\n                        },\r\n                        tooltip: {\r\n                            trigger: 'item'\r\n                        },\r\n                        legend: {\r\n                            orient: 'vertical',\r\n                            left: 'left'\r\n                        },\r\n                        series: [\r\n                            {\r\n                                name: '预约次数统计',\r\n                                type: 'pie',\r\n                                radius: '50%',\r\n                                data: item.DataList.map(x => { return { \"name\": x.Name, 'value': x.Value } }),\r\n                                emphasis: {\r\n                                    itemStyle: {\r\n                                        shadowBlur: 10,\r\n                                        shadowOffsetX: 0,\r\n                                        shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                                    }\r\n                                }\r\n                            }\r\n                        ]\r\n                    };\r\n\r\n                    myChart.setOption(option);// 渲染页面\r\n                    //随着屏幕大小调节图表\r\n                    window.addEventListener(\"resize\", () => {\r\n                        myChart.resize();\r\n                    });\r\n                }\r\n            })\r\n        },\r\n        /**\r\n       * 点击表格搜索按钮会触发\r\n       */\r\n        async SearchClick() {\r\n            if (this.searchForm.DateRange.length > 0) {\r\n                this.searchForm.BeginDate = this.searchForm.DateRange[0];\r\n                this.searchForm.EndDate = this.searchForm.DateRange[1];\r\n            }\r\n            this.GetAppointRoomAppointStatusData();\r\n\r\n        },\r\n        /**\r\n         * 点击清空表单会触发\r\n         */\r\n        async ResetClick() {\r\n            this.searchForm = { DateRange: [] };\r\n            this.GetAppointRoomAppointStatusData();\r\n        },\r\n\r\n\r\n\r\n    }\r\n}       \r\n</script>\r\n\r\n\r\n<style scoped></style>"],"mappings":"AAwCA,YAAAA,OAAA;AACA;EACAC,IAAA;EACAC,KAAA,GAEA;EACAC,KAAA;IACA;MACAC,UAAA;QACAC,SAAA;MACA;MACAC,QAAA;IAEA;EACA;EACAC,QAAA,GAEA;EACAC,QAAA;IACA,KAAAC,+BAAA;EAGA;EACAC,OAAA;IACA;IACA,MAAAD,gCAAA;MACA;QAAAE;MAAA,eAAAC,KAAA,wDAAAR,UAAA;MACA,KAAAE,QAAA,GAAAK,IAAA;MAEA,KAAAE,SAAA;QACA,SAAAC,IAAA,SAAAR,QAAA;UACA,IAAAS,OAAA,GAAAf,OAAA,CAAAgB,IAAA,CAAAC,QAAA,CAAAC,cAAA,aAAAJ,IAAA,CAAAK,IAAA,CAAAC,EAAA;;UAEA,IAAAC,MAAA,GAAAA,MAAA;YACAC,KAAA;cAEAC,IAAA;YACA;YACAC,OAAA;cACAC,OAAA;YACA;YACAC,MAAA;cACAC,MAAA;cACAJ,IAAA;YACA;YACAK,MAAA,GACA;cACA3B,IAAA;cACA4B,IAAA;cACAC,MAAA;cACA3B,IAAA,EAAAW,IAAA,CAAAR,QAAA,CAAAyB,GAAA,CAAAC,CAAA;gBAAA;kBAAA,QAAAA,CAAA,CAAAC,IAAA;kBAAA,SAAAD,CAAA,CAAAE;gBAAA;cAAA;cACAC,QAAA;gBACAC,SAAA;kBACAC,UAAA;kBACAC,aAAA;kBACAC,WAAA;gBACA;cACA;YACA;UAEA;UAEAxB,OAAA,CAAAyB,SAAA,CAAAnB,MAAA;UACA;UACAoB,MAAA,CAAAC,gBAAA;YACA3B,OAAA,CAAA4B,MAAA;UACA;QACA;MACA;IACA;IACA;AACA;AACA;IACA,MAAAC,YAAA;MACA,SAAAxC,UAAA,CAAAC,SAAA,CAAAwC,MAAA;QACA,KAAAzC,UAAA,CAAA0C,SAAA,QAAA1C,UAAA,CAAAC,SAAA;QACA,KAAAD,UAAA,CAAA2C,OAAA,QAAA3C,UAAA,CAAAC,SAAA;MACA;MACA,KAAAI,+BAAA;IAEA;IACA;AACA;AACA;IACA,MAAAuC,WAAA;MACA,KAAA5C,UAAA;QAAAC,SAAA;MAAA;MACA,KAAAI,+BAAA;IACA;EAIA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}